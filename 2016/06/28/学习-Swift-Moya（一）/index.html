<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>学习 Swift Moya（一） | 一路小跑</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="What is Moya ？
So the basic idea of Moya is that we want some network abstraction layer that sufficiently encapsulates actually calling Alamofire directly. It should be simple enough that common thing">
<meta property="og:type" content="article">
<meta property="og:title" content="学习 Swift Moya（一）">
<meta property="og:url" content="http://jkyeo.com/2016/06/28/学习-Swift-Moya（一）/index.html">
<meta property="og:site_name" content="一路小跑">
<meta property="og:description" content="What is Moya ？
So the basic idea of Moya is that we want some network abstraction layer that sufficiently encapsulates actually calling Alamofire directly. It should be simple enough that common thing">
<meta property="og:image" content="http://7xqi9q.com1.z0.glb.clouddn.com/2016-06-28_Moya.png">
<meta property="og:updated_time" content="2016-06-28T10:47:46.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="学习 Swift Moya（一）">
<meta name="twitter:description" content="What is Moya ？
So the basic idea of Moya is that we want some network abstraction layer that sufficiently encapsulates actually calling Alamofire directly. It should be simple enough that common thing">
<meta name="twitter:image" content="http://7xqi9q.com1.z0.glb.clouddn.com/2016-06-28_Moya.png">
  
    <link rel="alternative" href="/atom.xml" title="一路小跑" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">一路小跑</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://jkyeo.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-学习-Swift-Moya（一）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/06/28/学习-Swift-Moya（一）/" class="article-date">
  <time datetime="2016-06-28T09:40:50.000Z" itemprop="datePublished">2016-06-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      学习 Swift Moya（一）
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="What_is_Moya__uFF1F"><a href="#What_is_Moya__uFF1F" class="headerlink" title="What is Moya ？"></a>What is Moya ？</h2><blockquote>
<p>So the basic idea of Moya is that we want some network abstraction layer that sufficiently encapsulates actually calling Alamofire directly. It should be simple enough that common things are easy, but comprehensive enough that complicated things are also easy.</p>
</blockquote>
<p>Link: <a href="https://github.com/Moya/Moya" target="_blank" rel="external">https://github.com/Moya/Moya</a></p>
<h2 id="Feature"><a href="#Feature" class="headerlink" title="Feature"></a>Feature</h2><blockquote>
<p>Some awesome features of Moya:</p>
<ul>
<li>Compile-time checking for correct API endpoint accesses.</li>
<li>Lets you define a clear usage of different endpoints with associated enum values.</li>
<li>Treats test stubs as first-class citizens so unit testing is super-easy.</li>
</ul>
</blockquote>
<a id="more"></a>
<h2 id="Components"><a href="#Components" class="headerlink" title="Components"></a>Components</h2><p><img src="http://7xqi9q.com1.z0.glb.clouddn.com/2016-06-28_Moya.png" alt="2016-06-28_Moya.png"></p>
<h2 id="Default_Configure"><a href="#Default_Configure" class="headerlink" title="Default Configure"></a>Default Configure</h2><ul>
<li><strong>MoyaProvider Default init</strong></li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">init</span>(endpointClosure: <span class="type">EndpointClosure</span> = <span class="type">MoyaProvider</span>.<span class="type">DefaultEndpointMapping</span>,</div><div class="line">    requestClosure: <span class="type">RequestClosure</span> = <span class="type">MoyaProvider</span>.<span class="type">DefaultRequestMapping</span>,</div><div class="line">    stubClosure: <span class="type">StubClosure</span> = <span class="type">MoyaProvider</span>.<span class="type">NeverStub</span>,</div><div class="line">    manager: <span class="type">Manager</span> = <span class="type">MoyaProvider</span>&lt;<span class="type">Target</span>&gt;.<span class="type">DefaultAlamofireManager</span>(),</div><div class="line">    plugins: [<span class="type">PluginType</span>] = []) &#123;</div><div class="line">		</div><div class="line">        <span class="keyword">self</span>.endpointClosure = endpointClosure</div><div class="line">        <span class="keyword">self</span>.requestClosure = requestClosure</div><div class="line">        <span class="keyword">self</span>.stubClosure = stubClosure</div><div class="line">        <span class="keyword">self</span>.manager = manager</div><div class="line">        <span class="keyword">self</span>.plugins = plugins</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>Default EndpointClosure</strong></li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">DefaultEndpointMapping</span>(<span class="title">target</span>: <span class="title">Target</span>) -&gt; <span class="title">Endpoint</span>&lt;<span class="title">Target</span>&gt; </span>&#123;</div><div class="line">    <span class="keyword">let</span> url = target.baseURL.<span class="type">URLByAppendingPathComponent</span>(target.path).absoluteString</div><div class="line">    <span class="keyword">return</span> <span class="type">Endpoint</span>(<span class="type">URL</span>: url, sampleResponseClosure: &#123;.<span class="type">NetworkResponse</span>(<span class="number">200</span>, target.sampleData)&#125;, method: target.method, parameters: target.parameters)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>Default RequestMapping</strong></li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">DefaultRequestMapping</span>(<span class="title">endpoint</span>: <span class="title">Endpoint</span>&lt;<span class="title">Target</span>&gt;, <span class="title">closure</span>: <span class="title">NSURLRequest</span> -&gt; <span class="title">Void</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> closure(endpoint.urlRequest)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>Default Manager</strong></li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">DefaultAlamofireManager</span>() -&gt; <span class="title">Manager</span> </span>&#123;</div><div class="line">    <span class="keyword">let</span> configuration = <span class="type">NSURLSessionConfiguration</span>.defaultSessionConfiguration()</div><div class="line">    configuration.<span class="type">HTTPAdditionalHeaders</span> = <span class="type">Manager</span>.defaultHTTPHeaders</div><div class="line"></div><div class="line">    <span class="keyword">let</span> manager = <span class="type">Manager</span>(configuration: configuration)</div><div class="line">    manager.startRequestsImmediately = <span class="literal">false</span></div><div class="line">    <span class="keyword">return</span> manager</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Reference: <a href="https://github.com/Moya/Moya/tree/master/docs" target="_blank" rel="external">Moya Docs</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://jkyeo.com/2016/06/28/学习-Swift-Moya（一）/" data-id="cisxyslm2000cimwk0lqqinfx" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Swift/">Swift</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/06/29/学习-Swift-Moya（二）-Moya-SwiftyJSON-RxSwift/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          学习 Swift Moya（二）- Moya + SwiftyJSON + RxSwift
        
      </div>
    </a>
  
  
    <a href="/2016/05/17/《Android-源码设计模式解析与实战》学习笔记（一）/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">《Android 源码设计模式解析与实战》学习笔记（一）</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OkHttp/">OkHttp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Swift/">Swift</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/android/">android</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eventbus/">eventbus</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/">iOS</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/read/">read</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/retrofit/">retrofit</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rxjava/">rxjava</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shadowsocks/">shadowsocks</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/swift/">swift</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/view/">view</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vps/">vps</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/科学上网/">科学上网</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Android/" style="font-size: 10px;">Android</a> <a href="/tags/OkHttp/" style="font-size: 10px;">OkHttp</a> <a href="/tags/Swift/" style="font-size: 10px;">Swift</a> <a href="/tags/android/" style="font-size: 20px;">android</a> <a href="/tags/eventbus/" style="font-size: 10px;">eventbus</a> <a href="/tags/iOS/" style="font-size: 15px;">iOS</a> <a href="/tags/read/" style="font-size: 10px;">read</a> <a href="/tags/retrofit/" style="font-size: 10px;">retrofit</a> <a href="/tags/rxjava/" style="font-size: 15px;">rxjava</a> <a href="/tags/shadowsocks/" style="font-size: 10px;">shadowsocks</a> <a href="/tags/swift/" style="font-size: 10px;">swift</a> <a href="/tags/view/" style="font-size: 10px;">view</a> <a href="/tags/vps/" style="font-size: 10px;">vps</a> <a href="/tags/科学上网/" style="font-size: 10px;">科学上网</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/07/10/SplashView-一行代码解决闪屏页-广告页-iOS-Swift-篇/">SplashView - 一行代码解决闪屏页(广告页) - iOS(Swift) 篇</a>
          </li>
        
          <li>
            <a href="/2016/07/10/SplashView-一行代码解决闪屏页-广告页-Android-篇/">SplashView - 一行代码解决闪屏页(广告页) - Android 篇</a>
          </li>
        
          <li>
            <a href="/2016/06/29/学习-Swift-Moya（二）-Moya-SwiftyJSON-RxSwift/">学习 Swift Moya（二）- Moya + SwiftyJSON + RxSwift</a>
          </li>
        
          <li>
            <a href="/2016/06/28/学习-Swift-Moya（一）/">学习 Swift Moya（一）</a>
          </li>
        
          <li>
            <a href="/2016/05/17/《Android-源码设计模式解析与实战》学习笔记（一）/">《Android 源码设计模式解析与实战》学习笔记（一）</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 jk.yeo<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>